<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vollständige Enumeration - Maximum Subarray</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #333;
            text-decoration: none;
            font-weight: bold;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .description {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .section {
            margin: 40px 0;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            line-height: 1.8;
            white-space: pre-wrap;
        }

        .code-comment {
            color: #5c6370;
        }

        .code-keyword {
            color: #c678dd;
        }

        .code-function {
            color: #61afef;
        }

        .code-number {
            color: #d19a66;
        }

        .visualization-container {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            align-items: center;
        }

        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            min-width: 250px;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            background: #667eea;
            color: white;
        }

        button:hover {
            background: #5568d3;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .info-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            margin: 20px 0;
        }

        .info-box h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .array-display {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .array-element {
            background: #e0e0e0;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }

        .array-element.positive {
            background: #d4edda;
            color: #155724;
        }

        .array-element.negative {
            background: #f8d7da;
            color: #721c24;
        }

        .array-element.current {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .array-element.selected {
            background: #28a745;
            color: white;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.3);
        }

        .array-element.best {
            background: #ffc107;
            color: #333;
            box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.5);
            animation: pulse 1s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .subarray-info {
            background: #fff9e6;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            border: 2px solid #ffc107;
        }

        .subarray-list {
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .subarray-item {
            background: white;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #e0e0e0;
            transition: all 0.3s;
        }

        .subarray-item.best-subarray {
            border-left-color: #ffc107;
            background: #fff9e6;
            font-weight: bold;
        }

        .subarray-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .subarray-array {
            font-family: 'Courier New', monospace;
            color: #667eea;
        }

        .subarray-sum {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
        }

        .progress-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }

        .algorithm-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .algorithm-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }

        .algorithm-card h3 {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .complexity-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin: 5px;
        }

        .complexity-good {
            background: #d4edda;
            color: #155724;
        }

        .complexity-medium {
            background: #fff3cd;
            color: #856404;
        }

        .complexity-bad {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">← Zurück zur Übersicht</a>

        <div class="header">
            <h1>Vollständige Enumeration</h1>
            <h2 style="color: #666; font-size: 1.2em; margin-top: 10px;">Maximum Subarray Problem</h2>
        </div>

        <div class="description">
            <strong>Überblick:</strong> Vollständige Enumeration (auch "Brute Force" genannt) ist eine
            algorithmische Strategie, bei der systematisch alle möglichen Lösungen durchprobiert werden,
            um die optimale Lösung zu finden. Am Beispiel des Maximum Subarray Problems wird gezeigt,
            wie durch das Durchprobieren aller möglichen zusammenhängenden Teilarrays die maximale Summe gefunden wird.
        </div>

        <div class="section">
            <h2>Das Maximum Subarray Problem</h2>

            <div class="info-box">
                <h3>Problemstellung:</h3>
                <p>Gegeben ist ein Array von Zahlen (positiv und negativ). Finde das zusammenhängende
                Teilarray (Subarray) mit der größten Summe.</p>
                <br>
                <p><strong>Beispiel:</strong></p>
                <p style="font-family: 'Courier New', monospace; margin-top: 10px;">
                    Array: [-2, 1, -3, 4, -1, 2, 1, -5, 4]<br>
                    Maximum Subarray: [4, -1, 2, 1]<br>
                    Maximum Summe: 6
                </p>
            </div>

            <div class="info-box">
                <h3>Vollständige Enumeration Ansatz:</h3>
                <ol style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li>Betrachte alle möglichen Subarrays (alle Kombinationen von Start- und Endindex)</li>
                    <li>Berechne die Summe für jedes Subarray</li>
                    <li>Merke dir das Subarray mit der größten Summe</li>
                    <li>Gib das beste Subarray zurück</li>
                </ol>
                <br>
                <p><strong>Anzahl möglicher Subarrays:</strong> Für ein Array der Länge n gibt es
                n × (n + 1) / 2 mögliche Subarrays (alle Kombinationen von Start- und Endindex, wobei Start ≤ End).</p>
            </div>
        </div>

        <div class="section">
            <h2>Interaktive Visualisierung</h2>

            <div class="visualization-container">
                <div class="controls">
                    <input type="text" id="arrayInput" placeholder="z.B. -2,1,-3,4,-1,2,1,-5,4" value="-2,1,-3,4,-1,2,1,-5,4">
                    <button onclick="startEnumeration()">Alle Subarrays finden</button>
                    <button onclick="stopEnumeration()">Stop</button>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="arrayLength">-</div>
                        <div class="stat-label">Array Länge</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalSubarrays">-</div>
                        <div class="stat-label">Mögliche Subarrays</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="checkedSubarrays">0</div>
                        <div class="stat-label">Geprüft</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="maxSum">-</div>
                        <div class="stat-label">Maximale Summe</div>
                    </div>
                </div>

                <div class="progress-info" id="progressInfo">
                    Bereit zum Start
                </div>

                <h3 style="text-align: center; margin: 20px 0;">Array</h3>
                <div class="array-display" id="arrayDisplay"></div>

                <div class="subarray-info" id="subarrayInfo">
                    Aktuelles Subarray wird hier angezeigt
                </div>

                <h3 style="text-align: center; margin: 30px 0;">Alle gefundenen Subarrays</h3>
                <div class="subarray-list" id="subarrayList"></div>
            </div>
        </div>

        <div class="section">
            <h2>Code-Implementierung</h2>

            <div class="code-block">
<span class="code-keyword">function</span> <span class="code-function">maxSubarrayBruteForce</span>(arr) {
    <span class="code-keyword">let</span> maxSum = -Infinity;
    <span class="code-keyword">let</span> bestStart = <span class="code-number">0</span>;
    <span class="code-keyword">let</span> bestEnd = <span class="code-number">0</span>;

    <span class="code-comment">// Äußere Schleife: Startindex</span>
    <span class="code-keyword">for</span> (<span class="code-keyword">let</span> start = <span class="code-number">0</span>; start < arr.length; start++) {
        <span class="code-comment">// Innere Schleife: Endindex</span>
        <span class="code-keyword">for</span> (<span class="code-keyword">let</span> end = start; end < arr.length; end++) {
            <span class="code-comment">// Berechne Summe des aktuellen Subarrays</span>
            <span class="code-keyword">let</span> currentSum = <span class="code-number">0</span>;
            <span class="code-keyword">for</span> (<span class="code-keyword">let</span> k = start; k <= end; k++) {
                currentSum += arr[k];
            }

            <span class="code-comment">// Update Maximum wenn größere Summe gefunden</span>
            <span class="code-keyword">if</span> (currentSum > maxSum) {
                maxSum = currentSum;
                bestStart = start;
                bestEnd = end;
            }
        }
    }

    <span class="code-keyword">return</span> {
        sum: maxSum,
        subarray: arr.slice(bestStart, bestEnd + <span class="code-number">1</span>),
        start: bestStart,
        end: bestEnd
    };
}

<span class="code-comment">// Zeitkomplexität: O(n³) - Drei verschachtelte Schleifen!
// Raumkomplexität: O(1)</span>
            </div>

            <div class="info-box">
                <h3>Optimierte Version - O(n²):</h3>
                <p>Wir können die innerste Schleife eliminieren, indem wir die Summe inkrementell berechnen:</p>
            </div>

            <div class="code-block">
<span class="code-keyword">function</span> <span class="code-function">maxSubarrayOptimized</span>(arr) {
    <span class="code-keyword">let</span> maxSum = -Infinity;
    <span class="code-keyword">let</span> bestStart = <span class="code-number">0</span>;
    <span class="code-keyword">let</span> bestEnd = <span class="code-number">0</span>;

    <span class="code-comment">// Äußere Schleife: Startindex</span>
    <span class="code-keyword">for</span> (<span class="code-keyword">let</span> start = <span class="code-number">0</span>; start < arr.length; start++) {
        <span class="code-keyword">let</span> currentSum = <span class="code-number">0</span>;

        <span class="code-comment">// Innere Schleife: Endindex</span>
        <span class="code-keyword">for</span> (<span class="code-keyword">let</span> end = start; end < arr.length; end++) {
            <span class="code-comment">// Füge nur das neue Element hinzu (inkrementell)</span>
            currentSum += arr[end];

            <span class="code-comment">// Update Maximum wenn größere Summe gefunden</span>
            <span class="code-keyword">if</span> (currentSum > maxSum) {
                maxSum = currentSum;
                bestStart = start;
                bestEnd = end;
            }
        }
    }

    <span class="code-keyword">return</span> {
        sum: maxSum,
        subarray: arr.slice(bestStart, bestEnd + <span class="code-number">1</span>),
        start: bestStart,
        end: bestEnd
    };
}

<span class="code-comment">// Zeitkomplexität: O(n²) - Zwei verschachtelte Schleifen
// Raumkomplexität: O(1)</span>
            </div>
        </div>

        <div class="section">
            <h2>Algorithmen-Vergleich</h2>

            <div class="algorithm-comparison">
                <div class="algorithm-card">
                    <h3>Brute Force (Vollständige Enumeration)</h3>
                    <p style="margin: 15px 0;">Durchprobieren aller möglichen Subarrays</p>
                    <div style="text-align: center; margin: 10px 0;">
                        <span class="complexity-badge complexity-medium">Zeit: O(n²)</span>
                        <span class="complexity-badge complexity-good">Raum: O(1)</span>
                    </div>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                        <strong>Vorteile:</strong> Einfach zu verstehen und implementieren<br>
                        <strong>Nachteile:</strong> Langsam bei großen Arrays
                    </p>
                </div>

                <div class="algorithm-card">
                    <h3>Kadane's Algorithmus</h3>
                    <p style="margin: 15px 0;">Intelligente dynamische Programmierung</p>
                    <div style="text-align: center; margin: 10px 0;">
                        <span class="complexity-badge complexity-good">Zeit: O(n)</span>
                        <span class="complexity-badge complexity-good">Raum: O(1)</span>
                    </div>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                        <strong>Vorteile:</strong> Sehr effizient, linear<br>
                        <strong>Nachteile:</strong> Weniger intuitiv
                    </p>
                </div>

                <div class="algorithm-card">
                    <h3>Divide & Conquer</h3>
                    <p style="margin: 15px 0;">Rekursives Teilen und Zusammenführen</p>
                    <div style="text-align: center; margin: 10px 0;">
                        <span class="complexity-badge complexity-medium">Zeit: O(n log n)</span>
                        <span class="complexity-badge complexity-medium">Raum: O(log n)</span>
                    </div>
                    <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                        <strong>Vorteile:</strong> Parallelisierbar<br>
                        <strong>Nachteile:</strong> Komplexer, mehr Speicher
                    </p>
                </div>
            </div>

            <div class="info-box">
                <h3>Kadane's Algorithmus (O(n)):</h3>
                <p>Der optimale Algorithmus für dieses Problem. Idee: Zu jedem Index entscheiden, ob
                wir das Subarray fortsetzen oder neu starten.</p>
            </div>

            <div class="code-block">
<span class="code-keyword">function</span> <span class="code-function">maxSubarrayKadane</span>(arr) {
    <span class="code-keyword">let</span> maxEndingHere = arr[<span class="code-number">0</span>];
    <span class="code-keyword">let</span> maxSoFar = arr[<span class="code-number">0</span>];
    <span class="code-keyword">let</span> start = <span class="code-number">0</span>, end = <span class="code-number">0</span>, s = <span class="code-number">0</span>;

    <span class="code-keyword">for</span> (<span class="code-keyword">let</span> i = <span class="code-number">1</span>; i < arr.length; i++) {
        <span class="code-comment">// Entweder Element hinzufügen oder neu starten</span>
        <span class="code-keyword">if</span> (maxEndingHere + arr[i] > arr[i]) {
            maxEndingHere = maxEndingHere + arr[i];
        } <span class="code-keyword">else</span> {
            maxEndingHere = arr[i];
            s = i;  <span class="code-comment">// Neuer Startpunkt</span>
        }

        <span class="code-comment">// Update globales Maximum</span>
        <span class="code-keyword">if</span> (maxEndingHere > maxSoFar) {
            maxSoFar = maxEndingHere;
            start = s;
            end = i;
        }
    }

    <span class="code-keyword">return</span> {
        sum: maxSoFar,
        subarray: arr.slice(start, end + <span class="code-number">1</span>),
        start: start,
        end: end
    };
}

<span class="code-comment">// Zeitkomplexität: O(n) - Nur eine Schleife!
// Raumkomplexität: O(1)</span>
            </div>
        </div>

        <div class="section">
            <h2>Wann verwendet man vollständige Enumeration?</h2>

            <div class="info-box">
                <h3>Geeignete Szenarien:</h3>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li><strong>Kleine Problemgrößen:</strong> Wenn n klein ist, spielt die Komplexität keine große Rolle</li>
                    <li><strong>Korrektheit wichtiger als Geschwindigkeit:</strong> Einfache, leicht verifizierbare Lösung</li>
                    <li><strong>Keine bessere Lösung bekannt:</strong> Manchmal ist Brute Force die einzige Möglichkeit</li>
                    <li><strong>Prototyping:</strong> Schnelle erste Implementierung, später optimieren</li>
                    <li><strong>Vergleichsbasis:</strong> Um optimierte Algorithmen zu testen und zu validieren</li>
                </ul>
            </div>

            <div class="info-box">
                <h3>Weitere Beispiele für vollständige Enumeration:</h3>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li>Traveling Salesman Problem (kleine Instanzen)</li>
                    <li>N-Damen Problem</li>
                    <li>Passwort-Cracking (alle Kombinationen probieren)</li>
                    <li>Subset-Sum Problem</li>
                    <li>Sudoku-Löser mit Backtracking</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let isRunning = false;
        let currentArray = [];

        function displayArray(arr, highlightIndices = []) {
            const display = document.getElementById('arrayDisplay');
            display.innerHTML = '';

            arr.forEach((num, index) => {
                const element = document.createElement('div');
                element.className = 'array-element';

                if (num > 0) element.classList.add('positive');
                if (num < 0) element.classList.add('negative');
                if (highlightIndices.includes(index)) element.classList.add('current');

                element.textContent = num;
                element.id = `elem-${index}`;
                display.appendChild(element);
            });
        }

        async function startEnumeration() {
            const input = document.getElementById('arrayInput').value;
            currentArray = input.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));

            if (currentArray.length === 0) {
                alert('Bitte gültiges Array eingeben!');
                return;
            }

            isRunning = true;

            const n = currentArray.length;
            const totalSubarrays = (n * (n + 1)) / 2;

            document.getElementById('arrayLength').textContent = n;
            document.getElementById('totalSubarrays').textContent = totalSubarrays;
            document.getElementById('checkedSubarrays').textContent = 0;
            document.getElementById('maxSum').textContent = '-∞';

            displayArray(currentArray);

            const subarrayList = document.getElementById('subarrayList');
            subarrayList.innerHTML = '';

            let maxSum = -Infinity;
            let bestStart = 0;
            let bestEnd = 0;
            let checked = 0;

            // Vollständige Enumeration
            for (let start = 0; start < n && isRunning; start++) {
                let currentSum = 0;

                for (let end = start; end < n && isRunning; end++) {
                    // Inkrementelle Summenberechnung
                    currentSum += currentArray[end];
                    checked++;

                    // Highlight current subarray
                    highlightSubarray(start, end);

                    // Update info
                    const subarray = currentArray.slice(start, end + 1);
                    document.getElementById('subarrayInfo').innerHTML = `
                        <strong>Aktuelles Subarray [${start}...${end}]:</strong><br>
                        [${subarray.join(', ')}] = ${currentSum}
                    `;

                    document.getElementById('progressInfo').textContent =
                        `Prüfe Subarray ${checked} von ${totalSubarrays} (${Math.round(checked/totalSubarrays*100)}%)`;
                    document.getElementById('checkedSubarrays').textContent = checked;

                    // Add to list
                    const item = document.createElement('div');
                    item.className = 'subarray-item';
                    item.id = `subarray-${start}-${end}`;
                    item.innerHTML = `
                        <span class="subarray-array">[${start}...${end}]: [${subarray.join(', ')}]</span>
                        <span class="subarray-sum">${currentSum}</span>
                    `;
                    subarrayList.insertBefore(item, subarrayList.firstChild);

                    // Update maximum
                    if (currentSum > maxSum) {
                        // Remove previous best highlight
                        const prevBest = document.querySelector('.best-subarray');
                        if (prevBest) prevBest.classList.remove('best-subarray');

                        maxSum = currentSum;
                        bestStart = start;
                        bestEnd = end;

                        document.getElementById('maxSum').textContent = maxSum;
                        item.classList.add('best-subarray');

                        // Scroll to best
                        item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }

                    await sleep(100);
                }
            }

            if (isRunning) {
                // Final highlight
                highlightBestSubarray(bestStart, bestEnd);

                document.getElementById('progressInfo').innerHTML = `
                    <strong style="color: #28a745;">✓ Fertig!</strong> Maximum Subarray gefunden:
                    [${bestStart}...${bestEnd}] mit Summe ${maxSum}
                `;

                document.getElementById('subarrayInfo').innerHTML = `
                    <strong style="color: #28a745; font-size: 1.3em;">
                        🏆 Bestes Subarray: [${currentArray.slice(bestStart, bestEnd + 1).join(', ')}] = ${maxSum}
                    </strong>
                `;
            }

            isRunning = false;
        }

        function stopEnumeration() {
            isRunning = false;
            document.getElementById('progressInfo').innerHTML =
                '<strong style="color: #dc3545;">Gestoppt</strong>';
        }

        function highlightSubarray(start, end) {
            // Remove all highlights
            document.querySelectorAll('.array-element').forEach(el => {
                el.classList.remove('selected', 'current');
            });

            // Highlight current subarray
            for (let i = start; i <= end; i++) {
                document.getElementById(`elem-${i}`).classList.add('selected');
            }
        }

        function highlightBestSubarray(start, end) {
            // Remove all highlights
            document.querySelectorAll('.array-element').forEach(el => {
                el.classList.remove('selected', 'current', 'best');
            });

            // Highlight best subarray
            for (let i = start; i <= end; i++) {
                document.getElementById(`elem-${i}`).classList.add('best');
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Initialize
        window.addEventListener('load', () => {
            const input = document.getElementById('arrayInput').value;
            const arr = input.split(',').map(x => parseInt(x.trim()));
            displayArray(arr);
        });
    </script>
</body>
</html>
